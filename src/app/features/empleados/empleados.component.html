<div class="empleados-wrapper">
  <p-toast></p-toast>

  <div class="actions">
    <p-button
      label="Insertar"
      icon="pi pi-plus"
      styleClass="p-button-success"
    ></p-button>
    <p-button
      label="Eliminar"
      icon="pi pi-trash"
      styleClass="p-button-danger"
    ></p-button>
    <p-button
      label="Editar"
      icon="pi pi-pencil"
      styleClass="p-button-warning"
    ></p-button>
    <p-button
      label="Importar"
      icon="pi pi-upload"
      styleClass="p-button-help"
    ></p-button>
    <p-button
      label="Exportar"
      icon="pi pi-download"
      styleClass="p-button-info"
      (click)="dt.exportCSV()"
    ></p-button>
  </div>

  <div class="header-row">
    <h2>Administrar Empleados</h2>
    <span class="p-input-icon-left search-box">
      <i class="pi pi-search"></i>
      <input
        pInputText
        type="text"
        (input)="onGlobalFilter($event)"
        placeholder="Buscar..."
      />
    </span>
  </div>

  <div class="table-wrapper">
    <p-table
      #dt
      [value]="(empleados$ | async) ?? []"
      [paginator]="true"
      [rows]="5"
      [showCurrentPageReport]="true"
      [tableStyle]="{ 'min-width': '50rem' }"
      currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} empleados"
      [globalFilterFields]="['nombre', 'puesto', 'correo']"
      [rowsPerPageOptions]="[5, 10, 20]"
    >
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 3rem">
            <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
          </th>
          <th>ID</th>
          <th>Nombre</th>
          <th>Puesto</th>
          <th>Salario</th>
          <th>Estatus</th>
          <th>Correo electr√≥nico</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-empleado>
        <tr>
          <td>
            <p-tableCheckbox [value]="empleado"></p-tableCheckbox>
          </td>
          <td>{{ empleado.id }}</td>
          <td>{{ empleado.nombre }}</td>
          <td>{{ empleado.puesto }}</td>
          <td>
            {{ empleado.salario | currency : "USD" : "symbol" : "1.2-2" }}
          </td>
          <td>
            <p-tag
              [value]="empleado.estatus"
              [severity]="empleado.estatus === 'ACTIVO' ? 'success' : 'danger'"
            ></p-tag>
          </td>
          <td>{{ empleado.correo }}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
